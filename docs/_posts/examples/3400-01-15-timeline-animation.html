---
layout: example
category: example
title: Create a timeline animation
description: Drag the range slider below to illustrate earthquakes by year.
---
<script src='//d3js.org/d3.v3.min.js' charset='utf-8'></script>
<style>
pre.label {
    background: rgba(0,0,0,0.5);
    position: absolute;
    margin: 0;
    top: 10px;
    left: 10px;
    padding: 5px 10px;
    color: #fff;
    font-size: 11px;
    line-height: 18px;
    border-radius: 3px;
}

.map-control {
    position: absolute;
    width: 100%;
    bottom: 40px; 
}

.map-control .range-container {
    padding: 0 10px;
}

.map-control .range-container input {
    background-color: rgba(0,0,0,0.75);
    display: inline-block;
    width: 100%;
    position: relative;
    margin: 0;
}
</style>

<div id='map'></div>
<pre class='label'>2014 Earthquakes</pre>
<div class='map-control'>
  <div class='range-container'>
      <input type='range' min='0' step='1' max='1000' />
  </div>
</div>

<script>
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v8',
    center: [0, 0],
    zoom: 1
});

function earthquakeData() {
    var magnitudes = [
        [6.5, '#AF503A'],
        [6, '#C66835'],
        [5.5, '#D7832D'],
        [5, '#E1A225'],
        [4.5, '#E3C224'],
        [4, '#DEE432']
    ];

    d3.json('/mapbox-gl-js/assets/data/earthquakes.geojson', function(err, data) {

        map.addSource('earthquakes', {
          'type': 'geojson',
          'data': data
        });

        // Apply styles
        magnitudes.forEach(function(mag, i) {
            map.addLayer({
                "id": "circle-" + i,
                "type": "circle",
                "source": "earthquakes",
                "paint": {
                    "circle-opacity": 0.5,
                    "circle-radius": (mag[0] - 4) * 10,
                    "circle-color": mag[1]
                },
                "filter": i === 0 ?
                [">=", "mag", mag[0]] :
                ["all",
                    [">=", "mag", mag[0]],
                    ["<", "mag", magnitudes[i - 1][0]]]
            });
        });
    });
};

map.on('load', earthquakeData);
</script>
